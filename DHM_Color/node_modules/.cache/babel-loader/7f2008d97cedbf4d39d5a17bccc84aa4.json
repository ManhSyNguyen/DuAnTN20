{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\src\\\\pages\\\\views\\\\Admin\\\\EditProduct\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport apiRequest from '../../../../api/productApi';\nimport firebase from '../../../../firebase';\n\nconst EditProduct = ({\n  onUpdate,\n  categorys\n}) => {\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [editProduct, setEditProduct] = useState({});\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  useEffect(() => {\n    const getProduct = async () => {\n      try {\n        const {\n          data\n        } = await apiRequest.get(id);\n        setEditProduct(data);\n      } catch (error) {}\n    };\n\n    getProduct();\n  }, []);\n\n  const onHandleSubmit = data => {\n    let file = data.image[0]; // tạo reference chứa ảnh trên firesbase\n\n    let storageRef = firebase.storage().ref(`images/${file.name}`); // đẩy ảnh lên đường dẫn trên\n\n    storageRef.put(file).then(function () {\n      storageRef.getDownloadURL().then(url => {\n        console.log(url); // Tạo object mới chứa toàn bộ thông tin từ input\n\n        const newData = {\n          id,\n          ...data,\n          image: url\n        }; //     e.preventDefault();\n\n        onUpdate(newData);\n        console.log(newData);\n        history.push(\"/admin/products\");\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card shadow mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"m-0 font-weight-bold text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, \"C\\u1EADp nh\\u1EADp s\\u1EA3n ph\\u1EA9m\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onHandleSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"InputProductName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"InputProductName\",\n    defaultValue: editProduct.name,\n    name: \"name\",\n    ref: register({\n      required: true,\n      pattern: /^[A-Z a-z0-9]*$/\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }), errors.name && errors.name.type === \"required\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 36\n    }\n  }, \"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"), errors.name && errors.name.type === \"minLength\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 36\n    }\n  }, \"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"), errors.name && errors.name.type === \"pattern\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 36\n    }\n  }, \"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"InputProductName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, \"N\\u1ED9i dung ng\\u1EAFn\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    defaultValue: editProduct.ndngan,\n    id: \"InputProductName\",\n    name: \"ndngan\",\n    ref: register({\n      required: true,\n      minLength: 5,\n      pattern: /[A-Z a-z0-9]/\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }), errors.ndngan && errors.ndngan.type === \"required\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 36\n    }\n  }, \"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"), errors.ndngan && errors.ndngan.type === \"minLength\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 36\n    }\n  }, \"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"), errors.ndngan && errors.ndngan.type === \"pattern\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 36\n    }\n  }, \"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"InputProductStatus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, \"T\\xECnh tr\\u1EA1ng\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"*\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control form-control\",\n    name: \"status\",\n    ref: register({\n      required: true\n    }),\n    defaultValue: editProduct.status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }, \"----Kh\\xF4ng thu\\u1ED9c m\\u1EE5c n\\xE0o----\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, \"true\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, \"false\")), errors.status && errors.status.type === \"required\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 36\n    }\n  }, \"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    name: \"categoryId\",\n    ref: register(),\n    tabIndex: 1,\n    \"data-placeholder\": \"Select here..\",\n    className: \"form-control \",\n    defaultValue: editProduct.categoryId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, \"--Kh\\xF4ng thu\\u1ED9c danh m\\u1EE5c n\\xE0o--\"), categorys.map((category, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: index,\n    value: category.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 37\n    }\n  }, category.namedm)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"productPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"\\u1EA2nh s\\u1EA3n ph\\u1EA9m\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"custom-file-input\",\n    id: \"inputGroupFile02\",\n    name: \"image\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"custom-file-label\",\n    htmlFor: \"inputGroupFile02\",\n    \"aria-describedby\": \"imageHelp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, \"Choose image\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"InputProductPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, \"Gi\\xE1 nh\\u1EADp\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    id: \"InputProductName\",\n    name: \"regularprice\",\n    ref: register({\n      required: true,\n      min: 0,\n      pattern: /[-+]?[0-9]*[.,]?[0-9]+/\n    }),\n    defaultValue: editProduct.regularprice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }), errors.regularprice && errors.regularprice.type === \"required\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 36\n    }\n  }, \"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"), errors.regularprice && errors.regularprice.type === \"min\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 36\n    }\n  }, \"Sai \\u0111\\u1ECBnh d\\u1EA1ng\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"InputProductPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, \"Gi\\xE1 b\\xE1n\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    id: \"InputProductName\",\n    name: \"saleprice\",\n    ref: register({\n      required: true,\n      min: 0,\n      pattern: /[-+]?[0-9]*[.,]?[0-9]+/\n    }),\n    defaultValue: editProduct.saleprice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }), errors.saleprice && errors.saleprice.type === \"required\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 36\n    }\n  }, \"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"), errors.saleprice && errors.saleprice.type === \"min\" && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 36\n    }\n  }, \"Sai \\u0111\\u1ECBnh d\\u1EA1ng\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"C\\u1EADp nh\\u1EADt\")))));\n};\n\nEditProduct.propTypes = {};\nexport default EditProduct;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Du_an20/DuAnTN20/DHM_Color/src/pages/views/Admin/EditProduct/index.js"],"names":["React","useState","useEffect","PropTypes","useParams","useHistory","useForm","apiRequest","firebase","EditProduct","onUpdate","categorys","id","history","editProduct","setEditProduct","register","handleSubmit","errors","getProduct","data","get","error","onHandleSubmit","file","image","storageRef","storage","ref","name","put","then","getDownloadURL","url","console","log","newData","push","color","required","pattern","type","ndngan","minLength","status","categoryId","map","category","index","namedm","min","regularprice","saleprice","propTypes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport apiRequest from '../../../../api/productApi'\r\nimport firebase from '../../../../firebase'\r\nconst EditProduct = ({ onUpdate, categorys }) => {\r\n    let { id } = useParams();\r\n    let history = useHistory();\r\n    const [editProduct, setEditProduct] = useState({});\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n    useEffect(() => {\r\n        const getProduct = async () => {\r\n            try {\r\n                const { data } = await apiRequest.get(id);\r\n                setEditProduct(data);\r\n            } catch (error) {\r\n\r\n            }\r\n        };\r\n        getProduct()\r\n    }, [])\r\n    const onHandleSubmit = (data) => {\r\n        let file = data.image[0];\r\n        // tạo reference chứa ảnh trên firesbase\r\n        let storageRef = firebase.storage().ref(`images/${file.name}`);\r\n        // đẩy ảnh lên đường dẫn trên\r\n        storageRef.put(file).then(function () {\r\n            storageRef.getDownloadURL().then((url) => {\r\n                console.log(url);\r\n                // Tạo object mới chứa toàn bộ thông tin từ input\r\n                const newData = {\r\n                    id,\r\n                    ...data,\r\n                    image: url\r\n                }\r\n                //     e.preventDefault();\r\n                onUpdate(newData);\r\n                console.log(newData)\r\n                history.push(\"/admin/products\");\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"card shadow mb-4\">\r\n                <div className=\"card-header py-3\">\r\n                    <h6 className=\"m-0 font-weight-bold text-primary\">Cập nhập sản phẩm</h6>\r\n                </div>\r\n                <div className=\"card-body\" >\r\n                    <form onSubmit={handleSubmit(onHandleSubmit)} >\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductName\">Tên sản phẩm</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                defaultValue={editProduct.name}\r\n                                name=\"name\"\r\n                                ref={register({ required: true, pattern: /^[A-Z a-z0-9]*$/ })} />\r\n                            {errors.name && errors.name.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.name && errors.name.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.name && errors.name.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"InputProductName\">Nội dung ngắn</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\" className=\"form-control\"\r\n                                defaultValue={editProduct.ndngan} id=\"InputProductName\" name=\"ndngan\"\r\n                                ref={register({ required: true, minLength: 5, pattern: /[A-Z a-z0-9]/ })} />\r\n                            {errors.ndngan && errors.ndngan.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.ndngan && errors.ndngan.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.ndngan && errors.ndngan.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductStatus\">Tình trạng</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <select className=\"form-control form-control\"\r\n                                name=\"status\" ref={register({ required: true })}\r\n                                defaultValue={editProduct.status} >\r\n                                <option value=\"\">----Không thuộc mục nào----</option>\r\n                                <option>true</option>\r\n                                <option>false</option>\r\n                            </select>\r\n                            {errors.status && errors.status.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                        </div>\r\n                        <div className=\"control\">\r\n                            <select\r\n                                name=\"categoryId\"\r\n                                ref={register()}\r\n                                tabIndex={1}\r\n                                data-placeholder=\"Select here..\"\r\n                                className=\"form-control \"\r\n                                defaultValue={editProduct.categoryId}\r\n                            >\r\n                                <option value=\"\">--Không thuộc danh mục nào--</option>\r\n                                {categorys.map((category, index) => (\r\n                                    <option key={index} value={category.id}>\r\n                                        {category.namedm}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"productPrice\">Ảnh sản phẩm</label>\r\n                            <div className=\"input-group\">\r\n                                <div className=\"custom-file\">\r\n                                    <input type=\"file\"\r\n                                        className=\"custom-file-input\"\r\n                                        id=\"inputGroupFile02\"\r\n                                        name=\"image\"\r\n                                        ref={register}\r\n                                    />\r\n                                    <label className=\"custom-file-label\" htmlFor=\"inputGroupFile02\" aria-describedby=\"imageHelp\">Choose image</label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductPrice\">Giá nhập</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"number\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                name=\"regularprice\"\r\n                                ref={register({ required: true, min: 0, pattern: /[-+]?[0-9]*[.,]?[0-9]+/ })}\r\n                                defaultValue={editProduct.regularprice} />\r\n                            {errors.regularprice && errors.regularprice.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.regularprice && errors.regularprice.type === \"min\"\r\n                                && <span style={{ color: \"red\" }} >Sai định dạng</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductPrice\">Giá bán</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"number\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                name=\"saleprice\"\r\n                                ref={register({ required: true, min: 0, pattern: /[-+]?[0-9]*[.,]?[0-9]+/ })}\r\n                                defaultValue={editProduct.saleprice} />\r\n                            {errors.saleprice && errors.saleprice.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.saleprice && errors.saleprice.type === \"min\"\r\n                                && <span style={{ color: \"red\" }} >Sai định dạng</span>}\r\n                        </div>\r\n\r\n                        <button className=\"btn btn-primary\">Cập nhật</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nEditProduct.propTypes = {\r\n\r\n}\r\n\r\nexport default EditProduct\r\n"]},"metadata":{},"sourceType":"module"}
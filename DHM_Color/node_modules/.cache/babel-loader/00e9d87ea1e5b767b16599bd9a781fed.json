{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React from'react';import{useForm}from'react-hook-form';import{useHistory}from'react-router-dom';import firebase from'../../../../firebase';var AddPost=function AddPost(_ref){var onAddP=_ref.onAddP;var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var onHandleSubmit=function onHandleSubmit(data){var file=data.image[0];// tạo reference chứa ảnh trên firesbase\nvar storageRef=firebase.storage().ref(\"imagesPost/\".concat(file.name));// đẩy ảnh lên đường dẫn trên\nstorageRef.put(file).then(function(){storageRef.getDownloadURL().then(function(url){console.log(url);var newdata=_objectSpread(_objectSpread({id:Math.random().toString(36).substr(2,9)},data),{},{image:url});onAddP(newdata);history.push(\"/admin/posts\");});});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card shadow mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header py-3\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"m-0 font-weight-bold text-primary\"},\"Th\\xEAm b\\xE0i vi\\u1EBFt\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onHandleSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputCategoryName\"},\"Ti\\xEAu \\u0111\\u1EC1\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"categoryName\",name:\"ten_baiviet\",ref:register({required:true,minLength:3,pattern:/[A-Z a-z0-9]/})}),errors.ten_baiviet&&errors.ten_baiviet.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.ten_baiviet&&errors.ten_baiviet.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"),errors.ten_baiviet&&errors.ten_baiviet.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"productPrice\"},\"\\u1EA2nh s\\u1EA3n ph\\u1EA9m\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-file\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"custom-file-input\",id:\"inputGroupFile02\",name:\"image\",ref:register}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"inputGroupFile02\",\"aria-describedby\":\"imageHelp\"},\"Choose image\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputCategoryName\"},\"N\\u1ED9i dung\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"categoryName\",name:\"noidung\",ref:register({required:true,minLength:3,pattern:/[A-Z a-z0-9]/})}),errors.noidung&&errors.noidung.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.noidung&&errors.noidung.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"),errors.noidung&&errors.noidung.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success\"},\"L\\u01B0u\")))));};export default AddPost;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Du_an20/DuAnTN20/DHM_Color/src/pages/views/Admin/AddPost/index.js"],"names":["React","useForm","useHistory","firebase","AddPost","onAddP","history","register","handleSubmit","errors","onHandleSubmit","data","file","image","storageRef","storage","ref","name","put","then","getDownloadURL","url","console","log","newdata","id","Math","random","toString","substr","push","color","required","minLength","pattern","ten_baiviet","type","noidung"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from '../../../../firebase'\r\nconst AddPost = ({ onAddP }) => {\r\n    let history = useHistory();\r\n    const { register, handleSubmit, errors } = useForm();\r\n    const onHandleSubmit = (data) => {\r\n        let file = data.image[0];\r\n        // tạo reference chứa ảnh trên firesbase\r\n        let storageRef = firebase.storage().ref(`imagesPost/${file.name}`);\r\n        // đẩy ảnh lên đường dẫn trên\r\n        storageRef.put(file).then(function () {\r\n            storageRef.getDownloadURL().then((url) => {\r\n                console.log(url);\r\n                const newdata = {\r\n                    id: Math.random().toString(36).substr(2, 9),\r\n                    ...data,\r\n                    image: url\r\n                };\r\n                onAddP(newdata);\r\n                history.push(\"/admin/posts\");\r\n            })\r\n        });\r\n    };\r\n    return (\r\n        <div>\r\n            <div className=\"card shadow mb-4\">\r\n                <div className=\"card-header py-3\">\r\n                    <h6 className=\"m-0 font-weight-bold text-primary\">Thêm bài viết</h6>\r\n                </div>\r\n                <div className=\"card-body\" >\r\n                    <form onSubmit={handleSubmit(onHandleSubmit)}>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputCategoryName\">Tiêu đề</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\" className=\"form-control\"\r\n                                id=\"categoryName\" name=\"ten_baiviet\"\r\n                                ref={register({\r\n                                    required: true, minLength: 3,\r\n                                    pattern: /[A-Z a-z0-9]/\r\n                                })} />\r\n                            {errors.ten_baiviet && errors.ten_baiviet.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.ten_baiviet && errors.ten_baiviet.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.ten_baiviet && errors.ten_baiviet.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"productPrice\">Ảnh sản phẩm</label>\r\n                            <div className=\"input-group\">\r\n                                <div className=\"custom-file\">\r\n                                    <input type=\"file\"\r\n                                        className=\"custom-file-input\"\r\n                                        id=\"inputGroupFile02\"\r\n                                        name=\"image\"\r\n                                        ref={register}\r\n                                    />\r\n                                    <label className=\"custom-file-label\" htmlFor=\"inputGroupFile02\" aria-describedby=\"imageHelp\">Choose image</label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputCategoryName\">Nội dung</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\" className=\"form-control\"\r\n                                id=\"categoryName\" name=\"noidung\"\r\n                                ref={register({\r\n                                    required: true, minLength: 3,\r\n                                    pattern: /[A-Z a-z0-9]/\r\n                                })} />\r\n                            {errors.noidung && errors.noidung.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.noidung && errors.noidung.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.noidung && errors.noidung.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-success\">Lưu</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nAddPost.propTypes = {\r\n\r\n}\r\n\r\nexport default AddPost\r\n"]},"metadata":{},"sourceType":"module"}
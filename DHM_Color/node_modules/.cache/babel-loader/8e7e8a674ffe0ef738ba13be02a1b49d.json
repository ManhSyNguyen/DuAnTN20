{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Du_an20\\\\DuAnTN20\\\\DHM_Color\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams,useHistory}from'react-router-dom';import{useForm}from'react-hook-form';import apiRequest from'../../../../api/productApi';import firebase from'../../../../firebase';var EditProduct=function EditProduct(_ref){var onUpdate=_ref.onUpdate,categorys=_ref.categorys;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),editProduct=_useState2[0],setEditProduct=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;useEffect(function(){var getProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$apiRequest$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return apiRequest.get(id);case 3:_yield$apiRequest$get=_context.sent;data=_yield$apiRequest$get.data;setEditProduct(data);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getProduct(){return _ref2.apply(this,arguments);};}();getProduct();},[]);var onHandleSubmit=function onHandleSubmit(data){var file=data.anh[0];// tạo reference chứa ảnh trên firesbase\nvar storageRef=firebase.storage().ref(\"images/\".concat(file.name));// đẩy ảnh lên đường dẫn trên\nstorageRef.put(file).then(function(){storageRef.getDownloadURL().then(function(url){console.log(url);// Tạo object mới chứa toàn bộ thông tin từ input\nvar newData=_objectSpread(_objectSpread({id:id},data),{},{anh:url});//     e.preventDefault();\nonUpdate(newData);console.log(newData);history.push(\"/admin/products\");});});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card shadow mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header py-3\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"m-0 font-weight-bold text-primary\"},\"C\\u1EADp nh\\u1EADp s\\u1EA3n ph\\u1EA9m\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onHandleSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductName\"},\"T\\xEAn s\\u1EA3n ph\\u1EA9m\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"InputProductName\",defaultValue:editProduct.ten_sp,name:\"ten_sp\",ref:register({required:true,pattern:/[A-Z a-z0-9]/})}),errors.ten_sp&&errors.ten_sp.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.ten_sp&&errors.ten_sp.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"),errors.ten_sp&&errors.ten_sp.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductName\"},\"N\\u1ED9i dung ng\\u1EAFn\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",defaultValue:editProduct.nd_ngan,id:\"InputProductName\",name:\"nd_ngan\",ref:register({required:true,minLength:5,pattern:/[A-Z a-z0-9]/})}),errors.nd_ngan&&errors.nd_ngan.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.nd_ngan&&errors.nd_ngan.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"),errors.nd_ngan&&errors.nd_ngan.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductStatus\"},\"T\\xECnh tr\\u1EA1ng\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control form-control\",name:\"tinh_trang\",ref:register({required:true}),defaultValue:editProduct.tinh_trang},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"----Kh\\xF4ng thu\\u1ED9c m\\u1EE5c n\\xE0o----\"),/*#__PURE__*/React.createElement(\"option\",null,\"true\"),/*#__PURE__*/React.createElement(\"option\",null,\"false\")),errors.tinh_trang&&errors.tinh_trang.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\")),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductSize\"},\"Size\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"select\",{name:\"size\",tabIndex:1,\"data-placeholder\":\"Select here..\",className:\"form-control \"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"--L\\u1EF1a ch\\u1ECDn size--\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductColor\"},\"M\\xE0u\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"select\",{name:\"Color\",tabIndex:1,\"data-placeholder\":\"Select here..\",className:\"form-control \"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"--L\\u1EF1a ch\\u1ECDn m\\xE0u--\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductCategory\"},\"Danh m\\u1EE5c\"),/*#__PURE__*/React.createElement(\"select\",{name:\"danhmuc_Id\",ref:register(),tabIndex:1,\"data-placeholder\":\"Select here..\",className:\"form-control \",defaultValue:editProduct.danhmuc_Id},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"--Kh\\xF4ng thu\\u1ED9c danh m\\u1EE5c n\\xE0o--\"),categorys.map(function(category,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:category.id},category.ten_danhmuc);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"productPrice\"},\"\\u1EA2nh s\\u1EA3n ph\\u1EA9m\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-file\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"custom-file-input\",id:\"inputGroupFile02\",name:\"anh\",ref:register}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"inputGroupFile02\",\"aria-describedby\":\"imageHelp\"},\"Choose image\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductPrice\"},\"Gi\\xE1 nh\\u1EADp\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",id:\"InputProductName\",name:\"gia_nhap\",ref:register({required:true,min:0,pattern:/[-+]?[0-9]*[.,]?[0-9]+/}),defaultValue:editProduct.gia_nhap}),errors.gia_nhap&&errors.gia_nhap.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.gia_nhap&&errors.gia_nhap.type===\"min\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Sai \\u0111\\u1ECBnh d\\u1EA1ng\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductPrice\"},\"Gi\\xE1 b\\xE1n\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",id:\"InputProductName\",name:\"gia_ban\",ref:register({required:true,min:0,pattern:/[-+]?[0-9]*[.,]?[0-9]+/}),defaultValue:editProduct.gia_ban}),errors.gia_ban&&errors.gia_ban.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.gia_ban&&errors.gia_ban.type===\"min\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Sai \\u0111\\u1ECBnh d\\u1EA1ng\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"InputProductName\"},\"N\\u1ED9i dung chi ti\\u1EBFt\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},\"*\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",className:\"form-control\",id:\"productName\",name:\"nd_chitiet\",ref:register({required:true,minLength:5,pattern:/[A-Z a-z0-9]/}),defaultValue:editProduct.nd_chitiet}),errors.nd_chitiet&&errors.nd_chitiet.type===\"required\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Vui l\\xF2ng kh\\xF4ng \\u0111\\u1EC3 tr\\u1ED1ng\"),errors.nd_chitiet&&errors.nd_chitiet.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Gi\\xE1 tr\\u1ECB ph\\u1EA3i l\\u1EDBn h\\u01A1n 5 k\\xED t\\u1EF1\"),errors.nd_chitiet&&errors.nd_chitiet.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Kh\\xF4ng ch\\u1EE9a k\\xED t\\u1EF1 \\u0111\\u1EB7c bi\\u1EC7t\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\"},\"C\\u1EADp nh\\u1EADt\")))));};export default EditProduct;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Du_an20/DuAnTN20/DHM_Color/src/pages/views/Admin/EditProduct/index.js"],"names":["React","useState","useEffect","useParams","useHistory","useForm","apiRequest","firebase","EditProduct","onUpdate","categorys","id","history","editProduct","setEditProduct","register","handleSubmit","errors","getProduct","get","data","onHandleSubmit","file","anh","storageRef","storage","ref","name","put","then","getDownloadURL","url","console","log","newData","push","color","ten_sp","required","pattern","type","nd_ngan","minLength","tinh_trang","danhmuc_Id","map","category","index","ten_danhmuc","min","gia_nhap","gia_ban","nd_chitiet"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport apiRequest from '../../../../api/productApi'\r\nimport firebase from '../../../../firebase'\r\nconst EditProduct = ({ onUpdate, categorys }) => {\r\n    let { id } = useParams();\r\n    let history = useHistory();\r\n    const [editProduct, setEditProduct] = useState({});\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n    useEffect(() => {\r\n        const getProduct = async () => {\r\n            try {\r\n                const { data } = await apiRequest.get(id);\r\n                setEditProduct(data);\r\n            } catch (error) {\r\n\r\n            }\r\n        };\r\n        getProduct()\r\n    }, [])\r\n    const onHandleSubmit = (data) => {\r\n        let file = data.anh[0];\r\n        // tạo reference chứa ảnh trên firesbase\r\n        let storageRef = firebase.storage().ref(`images/${file.name}`);\r\n        // đẩy ảnh lên đường dẫn trên\r\n        storageRef.put(file).then(function () {\r\n            storageRef.getDownloadURL().then((url) => {\r\n                console.log(url);\r\n                // Tạo object mới chứa toàn bộ thông tin từ input\r\n                const newData = {\r\n                    id,\r\n                    ...data,\r\n                    anh: url\r\n                }\r\n                //     e.preventDefault();\r\n                onUpdate(newData);\r\n                console.log(newData)\r\n                history.push(\"/admin/products\");\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"card shadow mb-4\">\r\n                <div className=\"card-header py-3\">\r\n                    <h6 className=\"m-0 font-weight-bold text-primary\">Cập nhập sản phẩm</h6>\r\n                </div>\r\n                <div className=\"card-body\" >\r\n                    <form onSubmit={handleSubmit(onHandleSubmit)} >\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductName\">Tên sản phẩm</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                defaultValue={editProduct.ten_sp}\r\n                                name=\"ten_sp\"\r\n                                ref={register({ required: true, pattern: /[A-Z a-z0-9]/ })} />\r\n                            {errors.ten_sp && errors.ten_sp.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.ten_sp && errors.ten_sp.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.ten_sp && errors.ten_sp.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"InputProductName\">Nội dung ngắn</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"text\" className=\"form-control\"\r\n                                defaultValue={editProduct.nd_ngan} id=\"InputProductName\" name=\"nd_ngan\"\r\n                                ref={register({ required: true, minLength: 5, pattern: /[A-Z a-z0-9]/ })} />\r\n                            {errors.nd_ngan && errors.nd_ngan.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.nd_ngan && errors.nd_ngan.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.nd_ngan && errors.nd_ngan.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductStatus\">Tình trạng</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <select className=\"form-control form-control\"\r\n                                name=\"tinh_trang\" ref={register({ required: true })}\r\n                                defaultValue={editProduct.tinh_trang} >\r\n                                <option value=\"\">----Không thuộc mục nào----</option>\r\n                                <option>true</option>\r\n                                <option>false</option>\r\n                            </select>\r\n                            {errors.tinh_trang && errors.tinh_trang.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                        </div>\r\n\r\n                        <div className=\"control\">\r\n                            <label htmlFor=\"InputProductSize\">Size</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <select\r\n                                name=\"size\"\r\n                                tabIndex={1}\r\n                                data-placeholder=\"Select here..\"\r\n                                className=\"form-control \"\r\n                            >\r\n                                <option value=\"\">--Lựa chọn size--</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"control\">\r\n                            <label htmlFor=\"InputProductColor\">Màu</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <select\r\n                                name=\"Color\"\r\n                                tabIndex={1}\r\n                                data-placeholder=\"Select here..\"\r\n                                className=\"form-control \"\r\n                            >\r\n                                <option value=\"\">--Lựa chọn màu--</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"control\">\r\n                            <label htmlFor=\"InputProductCategory\" >Danh mục</label>\r\n                            <select\r\n                                name=\"danhmuc_Id\"\r\n                                ref={register()}\r\n                                tabIndex={1}\r\n                                data-placeholder=\"Select here..\"\r\n                                className=\"form-control \"\r\n                                defaultValue={editProduct.danhmuc_Id}\r\n                            >\r\n                                <option value=\"\">--Không thuộc danh mục nào--</option>\r\n                                {categorys.map((category, index) => (\r\n                                    <option key={index} value={category.id}>\r\n                                        {category.ten_danhmuc}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"productPrice\">Ảnh sản phẩm</label>\r\n                            <div className=\"input-group\">\r\n                                <div className=\"custom-file\">\r\n                                    <input type=\"file\"\r\n                                        className=\"custom-file-input\"\r\n                                        id=\"inputGroupFile02\"\r\n                                        name=\"anh\"\r\n                                        ref={register}\r\n                                    />\r\n                                    <label className=\"custom-file-label\" htmlFor=\"inputGroupFile02\" aria-describedby=\"imageHelp\">Choose image</label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductPrice\">Giá nhập</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"number\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                name=\"gia_nhap\"\r\n                                ref={register({ required: true, min: 0, pattern: /[-+]?[0-9]*[.,]?[0-9]+/ })}\r\n                                defaultValue={editProduct.gia_nhap} />\r\n                            {errors.gia_nhap && errors.gia_nhap.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.gia_nhap && errors.gia_nhap.type === \"min\"\r\n                                && <span style={{ color: \"red\" }} >Sai định dạng</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductPrice\">Giá bán</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <input type=\"number\"\r\n                                className=\"form-control\"\r\n                                id=\"InputProductName\"\r\n                                name=\"gia_ban\"\r\n                                ref={register({ required: true, min: 0, pattern: /[-+]?[0-9]*[.,]?[0-9]+/ })}\r\n                                defaultValue={editProduct.gia_ban} />\r\n                            {errors.gia_ban && errors.gia_ban.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.gia_ban && errors.gia_ban.type === \"min\"\r\n                                && <span style={{ color: \"red\" }} >Sai định dạng</span>}\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"InputProductName\">Nội dung chi tiết</label>\r\n                            <span style={{ color: 'red' }}>*</span>\r\n                            <textarea type=\"text\" className=\"form-control\"\r\n                                id=\"productName\" name=\"nd_chitiet\"\r\n                                ref={register({\r\n                                    required: true,\r\n                                    minLength: 5, pattern: /[A-Z a-z0-9]/\r\n                                })}\r\n                                defaultValue={editProduct.nd_chitiet}></textarea>\r\n                            {errors.nd_chitiet && errors.nd_chitiet.type === \"required\"\r\n                                && <span style={{ color: \"red\" }}>Vui lòng không để trống</span>}\r\n                            {errors.nd_chitiet && errors.nd_chitiet.type === \"minLength\"\r\n                                && <span style={{ color: \"red\" }}>Giá trị phải lớn hơn 5 kí tự</span>}\r\n                            {errors.nd_chitiet && errors.nd_chitiet.type === \"pattern\"\r\n                                && <span style={{ color: \"red\" }}>Không chứa kí tự đặc biệt</span>}\r\n                        </div>\r\n                        <button className=\"btn btn-primary\">Cập nhật</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nEditProduct.propTypes = {\r\n\r\n}\r\n\r\nexport default EditProduct\r\n"]},"metadata":{},"sourceType":"module"}